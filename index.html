<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sadewa Elektronik - The First Cidahu Center Electronics</title>

  <style>
    :root {
      --primary: #00d4ff;
      --secondary: #7b2ff7;
      --accent: #ff00ff;
      --dark: #0a0e27;
      --darker: #050816;
      --light: #ffffff;
      --gray: #8892b0;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: var(--darker);
      color: var(--light);
      overflow-x: hidden;
      line-height: 1.6;
    }

    .bg-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: linear-gradient(135deg, #0a0e27 0%, #1a1a2e 50%, #0f0f23 100%);
    }

    .bg-animation::before {
      content: '';
      position: absolute;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at 20% 50%, rgba(123, 47, 247, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(0, 212, 255, 0.15) 0%, transparent 50%);
      animation: rotate 20s linear infinite;
    }

    @keyframes rotate {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .page-container {
      display: none;
    }

    .page-container.active {
      display: block;
    }

    header {
      background: linear-gradient(135deg, rgba(123, 47, 247, 0.1) 0%, rgba(0, 212, 255, 0.1) 100%);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(0, 212, 255, 0.2);
      padding: 2rem 1rem;
      text-align: center;
    }

    .logo {
      font-size: 2.5rem;
      font-weight: 800;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-transform: uppercase;
      letter-spacing: 3px;
      margin-bottom: 0.5rem;
      animation: glow 2s ease-in-out infinite;
    }

    @keyframes glow {

      0%,
      100% {
        filter: drop-shadow(0 0 5px var(--primary));
      }

      50% {
        filter: drop-shadow(0 0 20px var(--primary));
      }
    }

    .tagline {
      color: var(--gray);
      font-size: 1.1rem;
      letter-spacing: 1px;
    }

    nav {
      background: rgba(10, 14, 39, 0.7);
      backdrop-filter: blur(30px);
      border-bottom: 1px solid rgba(0, 212, 255, 0.15);
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .nav-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }

    nav ul {
      display: flex;
      list-style: none;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    nav ul li a {
      color: var(--gray);
      text-decoration: none;
      font-weight: 600;
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      transition: all 0.3s;
      position: relative;
    }

    nav ul li a:hover {
      color: var(--light);
      background: rgba(0, 212, 255, 0.1);
    }

    .admin-btn {
      background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      white-space: nowrap;
    }

    .admin-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(255, 107, 107, 0.4);
    }

    .nav-right {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .search-wrap {
      position: relative;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.55rem 0.75rem;
      border-radius: 16px;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.06), rgba(0, 212, 255, 0.06));
      border: 1px solid rgba(0, 212, 255, 0.18);
      box-shadow:
        0 12px 30px rgba(0, 0, 0, 0.35),
        inset 0 1px 0 rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(14px);
      transform-style: preserve-3d;
      transition: transform 0.18s ease, border-color 0.25s ease, box-shadow 0.25s ease;
      will-change: transform;
      min-width: 320px;
      max-width: 520px;
      flex: 1;
    }

    .search-wrap:hover {
      border-color: rgba(0, 212, 255, 0.38);
      box-shadow:
        0 16px 40px rgba(0, 212, 255, 0.12),
        0 12px 30px rgba(0, 0, 0, 0.35),
        inset 0 1px 0 rgba(255, 255, 255, 0.10);
    }

    .search-icon {
      font-size: 1.1rem;
      opacity: 0.9;
      transform: translateZ(18px);
      user-select: none;
    }

    #productSearch {
      width: 100%;
      border: none;
      outline: none;
      background: transparent;
      color: var(--light);
      font-size: 0.98rem;
      padding: 0.35rem 0.4rem;
      transform: translateZ(16px);
    }

    #productSearch::placeholder {
      color: rgba(136, 146, 176, 0.85);
    }

    .search-clear {
      border: none;
      background: rgba(255, 255, 255, 0.08);
      color: var(--light);
      width: 34px;
      height: 34px;
      border-radius: 12px;
      cursor: pointer;
      transition: transform 0.2s ease, background 0.2s ease;
      transform: translateZ(18px);
    }

    .search-clear:hover {
      transform: translateZ(18px) translateY(-2px);
      background: rgba(0, 212, 255, 0.15);
    }

    .search-meta {
      color: rgba(136, 146, 176, 0.95);
      font-size: 0.85rem;
      font-weight: 600;
      padding: 0.35rem 0.65rem;
      border-radius: 999px;
      border: 1px solid rgba(0, 212, 255, 0.18);
      background: rgba(10, 14, 39, 0.35);
      backdrop-filter: blur(10px);
      white-space: nowrap;
    }

    mark.search-hit {
      background: rgba(0, 212, 255, 0.25);
      color: var(--light);
      padding: 0.05rem 0.2rem;
      border-radius: 6px;
      border: 1px solid rgba(0, 212, 255, 0.25);
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 3rem 1rem;
    }

    .section-title {
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 3rem;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .section-title::after {
      content: '';
      display: block;
      width: 100px;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      margin: 1rem auto;
      border-radius: 2px;
    }

    .category-bar {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
      margin: -1rem 0 3rem;
    }


    .cat-btn {
      padding: 0.6rem 1.5rem;
      border-radius: 999px;
      border: 1px solid rgba(0, 212, 255, 0.25);
      background: rgba(10, 14, 39, 0.6);
      color: var(--gray);
      font-weight: 700;
      letter-spacing: 0.4px;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .cat-btn:hover,
    .cat-btn.active {
      color: white;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      box-shadow: 0 0 20px rgba(0, 212, 255, 0.35);
      border-color: rgba(0, 212, 255, 0.35);
      transform: translateY(-2px);
    }

    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 2rem;
      margin-bottom: 4rem;
    }

    .product-card {
      background: rgba(26, 26, 46, 0.6);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 212, 255, 0.2);
      border-radius: 20px;
      overflow: hidden;
      transition: all 0.4s;
    }

    .product-card:hover {
      transform: translateY(-15px);
      box-shadow: 0 20px 40px rgba(0, 212, 255, 0.3);
    }

    .product-image {
      height: 250px;
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(123, 47, 247, 0.1));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 5rem;
      position: relative;
      overflow: hidden;
    }

    .product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .product-badge {
      position: absolute;
      top: 15px;
      right: 15px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      padding: 0.4rem 1rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 700;
      letter-spacing: 0.4px;
      text-transform: uppercase;
    }

    .product-info {
      padding: 1.5rem;
    }

    .product-title {
      font-size: 1.5rem;
      color: var(--light);
      margin-bottom: 0.5rem;
      font-weight: 800;
      letter-spacing: 0.4px;
    }

    .product-desc {
      color: var(--gray);
      margin-bottom: 1rem;
      font-size: 0.95rem;
    }

    .product-price {
      font-size: 1.8rem;
      color: var(--primary);
      font-weight: 800;
      margin-bottom: 1rem;
    }

    .product-features {
      list-style: none;
      margin-bottom: 1.5rem;
    }

    .product-features li {
      color: var(--gray);
      font-size: 0.9rem;
      padding: 0.3rem 0 0.3rem 1.5rem;
      position: relative;
    }

    .product-features li::before {
      content: '‚úì';
      position: absolute;
      left: 0;
      color: var(--primary);
      font-weight: 900;
    }

    .btn {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 50px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 800;
      width: 100%;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(0, 212, 255, 0.5);
    }

    .contact-section {
      background: linear-gradient(135deg, rgba(123, 47, 247, 0.1), rgba(0, 212, 255, 0.1));
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 212, 255, 0.2);
      border-radius: 20px;
      padding: 3rem 2rem;
      margin-bottom: 4rem;
    }

    .contact-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .contact-card {
      background: rgba(26, 26, 46, 0.6);
      border: 1px solid rgba(0, 212, 255, 0.2);
      border-radius: 15px;
      padding: 2rem;
      text-align: center;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .contact-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(0, 212, 255, 0.3);
    }

    .contact-card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, transparent, rgba(0, 212, 255, 0.15), transparent);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .contact-card:hover::before {
      opacity: 1;
    }

    .contact-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      filter: drop-shadow(0 0 12px rgba(0, 212, 255, 0.25));
      position: relative;
      z-index: 1;
    }

    .contact-title {
      font-size: 1.05rem;
      color: var(--primary);
      margin-bottom: 0.5rem;
      font-weight: 800;
      letter-spacing: 1.4px;
      text-transform: uppercase;
      position: relative;
      z-index: 1;
    }

    .contact-info {
      color: var(--gray);
      position: relative;
      z-index: 1;
      word-break: break-word;
    }

    .contact-link {
      display: inline-block;
      margin-top: 1rem;
      padding: 0.7rem 1.5rem;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      text-decoration: none;
      border-radius: 30px;
      font-weight: 800;
      letter-spacing: 0.6px;
      transition: all 0.3s;
      position: relative;
      z-index: 1;
    }

    .contact-link:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(0, 212, 255, 0.35);
    }

    .chat-section {
      background: rgba(26, 26, 46, 0.6);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(0, 212, 255, 0.2);
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 4rem;
      box-shadow: 0 0 40px rgba(0, 212, 255, 0.12);
    }

    #chatlog {
      height: 450px;
      overflow-y: auto;
      padding:
        1.5rem;
      margin-bottom: 1.5rem;
      background: rgba(10, 14, 39, 0.65);
      border: 1px solid rgba(0, 212, 255, 0.1);
      border-radius: 15px;
    }

    #chatlog::-webkit-scrollbar {
      width: 8px;
    }

    #chatlog::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: 10px;
    }

    .message {
      margin-bottom: 1rem;
      padding: 1rem 1.5rem;
      border-radius: 15px;
      max-width: 85%;
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .user-message {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      margin-left: auto;
    }

    .bot-message {
      background: rgba(136, 146, 176, 0.2);
      border: 1px solid rgba(0, 212, 255, 0.2);
    }

    .product-card-chat {
      background: rgba(26, 26, 46, 0.8);
      border: 1px solid rgba(0, 212, 255, 0.3);
      border-radius: 12px;
      padding: 1rem;
      margin: 0.5rem 0;
      display: flex;
      gap: 1rem;
      align-items: center;
      transition: all 0.3s;
    }

    .product-card-chat:hover {
      background: rgba(26, 26, 46, 0.95);
      border-color: var(--primary);
      transform: translateX(5px);
    }

    .product-image-chat {
      width: 80px;
      height: 80px;
      min-width: 80px;
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(123, 47, 247, 0.1));
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      overflow: hidden;
    }

    .product-image-chat img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .product-info-chat {
      flex: 1;
    }

    .product-name-chat {
      font-weight: 800;
      color: var(--light);
      font-size: 1.1rem;
      margin-bottom: 0.3rem;
      letter-spacing: 0.3px;
    }

    .product-price-chat {
      color: var(--primary);
      font-weight: 800;
      font-size: 1.2rem;
      margin-bottom: 0.3rem;
    }

    .product-stock-chat {
      color: var(--gray);
      font-size: 0.9rem;
    }

    .stock-badge {
      display: inline-block;
      padding: 0.2rem 0.6rem;
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: 700;
      margin-left: 0.5rem;
    }

    .stock-badge.available {
      background: rgba(16, 185, 129, 0.2);
      color: #10b981;
    }

    .stock-badge.out {
      background: rgba(239, 68, 68, 0.2);
      color: #ef4444;
    }

    .buy-btn-chat {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 800;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 0.5rem;
      letter-spacing: 0.5px;
    }

    .buy-btn-chat:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4);
    }

    .chat-input-container {
      display: flex;
      gap: 1rem;
    }

    #userInput {
      flex: 1;
      padding: 1rem 1.5rem;
      background: rgba(10, 14, 39, 0.6);
      border: 1px solid rgba(0, 212, 255, 0.3);
      border-radius: 50px;
      color: var(--light);
      font-size: 1rem;
      outline: none;
      font-weight: 600;
      letter-spacing: 0.3px;
    }

    #userInput:focus {
      border-color: var(--primary);
      box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
    }

    #sendBtn {
      padding: 1rem 2.5rem;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      font-weight: 900;
      transition: all 0.3s;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    #sendBtn:hover:not(:disabled) {
      transform: translateY(-3px);
    }

    #sendBtn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    footer {
      background: rgba(10, 14, 39, 0.8);
      backdrop-filter: blur(20px);
      border-top: 1px solid rgba(0, 212, 255, 0.2);
      padding: 3rem 1rem;
      text-align: center;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin: 2rem 0;
      flex-wrap: wrap;
    }

    .footer-links a {
      color: var(--gray);
      text-decoration: none;
      transition: color 0.3s;
      font-weight: 700;
      letter-spacing: 0.4px;
    }

    .footer-links a:hover {
      color: var(--primary);
    }

    .copyright {
      color: var(--gray);
      font-size: 0.9rem;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: linear-gradient(135deg, rgba(26, 26, 46, 0.95), rgba(10, 14, 39, 0.95));
      border: 2px solid rgba(0, 212, 255, 0.3);
      border-radius: 20px;
      padding: 3rem;
      max-width: 450px;
      width: 90%;
      box-shadow: 0 20px 60px rgba(0, 212, 255, 0.3);
    }

    .modal-title {
      font-size: 2rem;
      margin-bottom: 2rem;
      text-align: center;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: var(--gray);
      font-weight: 700;
      letter-spacing: 0.4px;
    }

    .form-group input {
      width: 100%;
      padding: 1rem;
      background: rgba(10, 14, 39, 0.6);
      border: 1px solid rgba(0, 212, 255, 0.3);
      border-radius: 12px;
      color: var(--light);
      font-size: 1rem;
      outline: none;
      font-weight: 600;
    }

    .form-group input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
    }

    .btn-login {
      width: 100%;
      padding: 1rem;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 900;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 1rem;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    .btn-login:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(0, 212, 255, 0.5);
    }

    .btn-cancel {
      width: 100%;
      padding: 1rem;
      background: rgba(255, 107, 107, 0.2);
      color: #ff6b6b;
      border: 1px solid #ff6b6b;
      border-radius: 12px;
      font-weight: 800;
      cursor: pointer;
      transition: all 0.3s;
      letter-spacing: 0.6px;
    }

    .btn-cancel:hover {
      background: rgba(255, 107, 107, 0.3);
    }

    /* ===== CART STYLES START ===== */
    .cart-icon-wrapper {
      position: relative;
    }

    .cart-btn {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      border: none;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      white-space: nowrap;
      font-size: 1rem;
      position: relative;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .cart-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(0, 212, 255, 0.4);
    }

    .cart-badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #ef4444;
      color: white;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 900;
      box-shadow: 0 2px 8px rgba(239, 68, 68, 0.5);
    }

    .cart-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(8px);
      z-index: 3000;
      display: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .cart-modal.active {
      display: block;
      opacity: 1;
    }

    .cart-sidebar {
      position: fixed;
      top: 0;
      right: -450px;
      width: 100%;
      max-width: 450px;
      height: 100%;
      background: linear-gradient(135deg, rgba(26, 26, 46, 0.98), rgba(10, 14, 39, 0.98));
      backdrop-filter: blur(20px);
      border-left: 2px solid rgba(0, 212, 255, 0.3);
      box-shadow: -5px 0 30px rgba(0, 0, 0, 0.5);
      transition: right 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      display: flex;
      flex-direction: column;
      z-index: 3001;
    }

    .cart-modal.active .cart-sidebar {
      right: 0;
    }

    .cart-header {
      padding: 2rem;
      border-bottom: 1px solid rgba(0, 212, 255, 0.2);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .cart-title {
      font-size: 1.8rem;
      font-weight: 900;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: 0.5px;
    }

    .cart-close {
      background: rgba(255, 107, 107, 0.2);
      color: #ff6b6b;
      border: 1px solid #ff6b6b;
      border-radius: 8px;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 1.2rem;
      font-weight: 700;
    }

    .cart-close:hover {
      background: rgba(255, 107, 107, 0.4);
      transform: rotate(90deg);
    }

    .cart-items {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem;
    }

    .cart-items::-webkit-scrollbar {
      width: 8px;
    }

    .cart-items::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: 10px;
    }

    .cart-item {
      background: rgba(26, 26, 46, 0.6);
      border: 1px solid rgba(0, 212, 255, 0.2);
      border-radius: 15px;
      padding: 1.5rem;
      margin-bottom: 1rem;
      transition: all 0.3s;
      animation: slideInCart 0.3s ease-out;
    }

    @keyframes slideInCart {
      from {
        opacity: 0;
        transform: translateX(30px);
      }

      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .cart-item:hover {
      border-color: var(--primary);
      box-shadow: 0 5px 20px rgba(0, 212, 255, 0.2);
    }

    .cart-item-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 0.75rem;
    }

    .cart-item-name {
      font-size: 1.1rem;
      font-weight: 800;
      color: var(--light);
      letter-spacing: 0.3px;
      flex: 1;
    }

    .cart-item-remove {
      background: rgba(239, 68, 68, 0.2);
      color: #ef4444;
      border: 1px solid #ef4444;
      border-radius: 8px;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 1rem;
    }

    .cart-item-remove:hover {
      background: rgba(239, 68, 68, 0.4);
      transform: scale(1.1);
    }

    .cart-item-variant {
      color: var(--gray);
      font-size: 0.9rem;
      margin-bottom: 0.75rem;
      font-weight: 600;
    }

    .cart-item-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .cart-item-quantity {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      background: rgba(10, 14, 39, 0.6);
      padding: 0.5rem 0.75rem;
      border-radius: 12px;
      border: 1px solid rgba(0, 212, 255, 0.2);
    }

    .qty-btn {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      border-radius: 6px;
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
      font-weight: 900;
      font-size: 1rem;
    }

    .qty-btn:hover {
      transform: scale(1.15);
      box-shadow: 0 3px 10px rgba(0, 212, 255, 0.4);
    }

    .qty-btn:active {
      transform: scale(0.95);
    }

    .qty-value {
      font-weight: 800;
      color: var(--light);
      min-width: 30px;
      text-align: center;
      font-size: 1.05rem;
    }

    .cart-item-price {
      font-size: 1.2rem;
      font-weight: 900;
      color: var(--primary);
      letter-spacing: 0.3px;
    }

    .cart-empty {
      text-align: center;
      padding: 4rem 2rem;
      color: var(--gray);
    }

    .cart-empty-icon {
      font-size: 5rem;
      margin-bottom: 1rem;
      opacity: 0.5;
    }

    .cart-empty-text {
      font-size: 1.2rem;
      font-weight: 700;
      letter-spacing: 0.4px;
    }

    .cart-footer {
      border-top: 1px solid rgba(0, 212, 255, 0.2);
      padding: 1.5rem 2rem;
      background: rgba(10, 14, 39, 0.8);
    }

    .cart-total {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding: 1rem;
      background: rgba(26, 26, 46, 0.6);
      border-radius: 12px;
      border: 1px solid rgba(0, 212, 255, 0.2);
    }

    .cart-total-label {
      font-size: 1.2rem;
      font-weight: 800;
      color: var(--light);
      letter-spacing: 0.5px;
    }

    .cart-total-value {
      font-size: 1.8rem;
      font-weight: 900;
      color: var(--primary);
      letter-spacing: 0.3px;
    }

    .cart-checkout-btn {
      width: 100%;
      padding: 1.2rem;
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 1.1rem;
      font-weight: 900;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 1px;
      box-shadow: 0 5px 20px rgba(16, 185, 129, 0.3);
    }

    .cart-checkout-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 30px rgba(16, 185, 129, 0.5);
    }

    .cart-checkout-btn:active {
      transform: translateY(-1px);
    }

    .cart-clear-btn {
      width: 100%;
      padding: 0.8rem;
      background: rgba(239, 68, 68, 0.2);
      color: #ef4444;
      border: 1px solid #ef4444;
      border-radius: 12px;
      font-size: 0.95rem;
      font-weight: 800;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 0.75rem;
      letter-spacing: 0.5px;
    }

    .cart-clear-btn:hover {
      background: rgba(239, 68, 68, 0.3);
    }

    .variant-select {
      width: 100%;
      padding: 0.75rem 1rem;
      background: rgba(10, 14, 39, 0.6);
      border: 1px solid rgba(0, 212, 255, 0.3);
      border-radius: 12px;
      color: var(--light);
      font-size: 0.95rem;
      outline: none;
      font-weight: 600;
      margin-bottom: 1rem;
      cursor: pointer;
      transition: all 0.3s;
    }

    .variant-select:focus {
      border-color: var(--primary);
      box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
    }

    .variant-select option {
      background: var(--dark);
      color: var(--light);
      padding: 0.5rem;
    }

    @media (max-width: 768px) {
      .cart-sidebar {
        max-width: 100%;
      }

      .cart-item {
        padding: 1rem;
      }

      .cart-item-name {
        font-size: 1rem;
      }

      .cart-total-value {
        font-size: 1.5rem;
      }
    }

    /* ===== CART STYLES END ===== */

    .product-price-wrapper {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .btn-add-cart {
      width: 42px;
      height: 42px;
      border-radius: 12px;
      background: rgba(0, 212, 255, 0.15);
      border: 1px solid rgba(0, 212, 255, 0.3);
      color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-add-cart:hover {
      background: var(--primary);
      color: var(--darker);
      transform: scale(1.05);
      box-shadow: 0 0 15px rgba(0, 212, 255, 0.4);
    }

    .admin-container {
      background: linear-gradient(to right, #f3f4f6, #e5e7eb);
      min-height: 100vh;
      padding: 2rem;
    }

    .admin-header {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      margin-bottom: 2rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .admin-title {
      font-size: 2rem;
      font-weight: 900;
      color: #1f2937;
      letter-spacing: 0.4px;
    }

    .admin-logout {
      background: #ef4444;
      color: white;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 800;
      transition: all 0.3s;
    }

    .admin-logout:hover {
      background: #dc2626;
    }

    .admin-card {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      margin-bottom: 2rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .admin-card h2 {
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
      color: #1f2937;
      font-weight: 900;
      letter-spacing: 0.2px;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .form-input {
      padding: 0.75rem;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
    }

    .form-input:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .form-textarea {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 1rem;
      resize: vertical;
      min-height: 100px;
      font-weight: 600;
    }

    .icon-selector {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin: 1rem 0;
    }

    .icon-btn {
      font-size: 1.5rem;
      padding: 0.5rem;
      border: 2px solid #d1d5db;
      border-radius: 8px;
      cursor: pointer;
      background: white;
      transition: all 0.3s;
    }

    .icon-btn:hover,
    .icon-btn.selected {
      border-color: #3b82f6;
      background: #eff6ff;
    }

    .image-upload-container {
      border: 2px dashed #d1d5db;
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      margin: 1rem 0;
    }

    .image-upload-container:hover {
      border-color: #3b82f6;
      background: #eff6ff;
    }

    .image-preview {
      max-width: 200px;
      max-height: 200px;
      margin: 1rem auto;
      border-radius: 8px;
    }

    .video-preview {
      max-width: 200px;
      margin: 1rem auto;
      border-radius: 8px;
    }

    .admin-button {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 800;
      transition: all 0.3s;
      margin-right: 0.5rem;
    }

    .admin-button-primary {
      background: #3b82f6;
      color: white;
    }

    .admin-button-primary:hover {
      background: #2563eb;
    }

    .admin-button-danger {
      background: #ef4444;
      color: white;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
    }

    .admin-button-danger:hover {
      background: #dc2626;
    }

    .admin-table {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .admin-table table {
      width: 100%;
      border-collapse: collapse;
    }

    .admin-table th {
      background: #f3f4f6;
      padding: 1rem;
      text-align: left;
      font-weight: 800;
      color: #374151;
      border-bottom: 1px solid #e5e7eb;
    }

    .admin-table td {
      padding: 1rem;
      border-bottom: 1px solid #e5e7eb;
      color: #1f2937;
      font-weight: 600;
    }

    .admin-table tr:hover {
      background: #f9fafb;
    }

    .stock-status {
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 800;
    }

    .stock-available {
      background: #d1fae5;
      color: #065f46;
    }

    .stock-out {
      background: #fee2e2;
      color: #991b1b;
    }

    @media (max-width: 768px) {
      .logo {
        font-size: 2rem;
      }

      .section-title {
        font-size: 2rem;
      }

      .product-grid {
        grid-template-columns: 1fr;
      }

      .nav-container {
        flex-direction: column;
        gap: 1rem;
        align-items: stretch;
      }

      .nav-right {
        width: 100%;
        justify-content: stretch;
      }

      .search-wrap {
        min-width: 100%;
      }

      .chat-input-container {
        flex-direction: column;
      }

      .admin-header {
        flex-direction: column;
        gap: 1rem;
      }

      .form-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <div class="bg-animation"></div>

  <div id="loginModal" class="modal">
    <div class="modal-content">
      <h2 class="modal-title">üîê Admin Login</h2>
      <form onsubmit="window.handleLogin(event)">
        <div class="form-group">
          <label>Username</label>
          <input type="text" id="loginUsername" required>
        </div>
        <div class="form-group">
          <label>Password</label>
          <input type="password" id="loginPassword" required>
        </div>
        <button type="submit" class="btn-login">Login</button>
        <button type="button" class="btn-cancel" onclick="window.closeLoginModal()">Batal</button>
      </form>
    </div>
  </div>

  <div id="mainWebsite" class="page-container active">
    <header>
      <h1 class="logo">‚ö° SADEWA ELEKTRONIK</h1>
      <p class="tagline">The First Cidahu Official Electronics Center</p>
    </header>

    <nav>
      <div class="nav-container">
        <ul>
          <li><a href="#products">Produk</a></li>
          <li><a href="#contact">Kontak</a></li>
          <li><a href="#chat">AI Assistant</a></li>
          <li><a href="#about">Tentang Kami</a></li>
        </ul>

        <div class="nav-right">
          <div class="search-wrap" id="searchWrap" aria-label="Cari produk">
            <span class="search-icon">üîé</span>
            <input id="productSearch" type="text" placeholder="Cari produk (nama/kategori/fitur)..." autocomplete="off">
            <button class="search-clear" id="clearSearchBtn" type="button" title="Bersihkan">√ó</button>
          </div>
          <span class="search-meta" id="searchMeta">Menampilkan 0 dari 0</span>

          <!-- Cart Icon -->
          <div class="cart-icon-wrapper">
            <button class="cart-btn" onclick="toggleCart()">
              üõí
              <span id="cartBadge" class="cart-badge">0</span>
            </button>
          </div>

          <button class="admin-btn" onclick="window.showLoginModal()">üîß Admin Panel</button>
        </div>
      </div>
    </nav>

    <div class="container">
      <section id="products">
        <h2 class="section-title">Produk Unggulan</h2>

        <div class="category-bar" id="categoryBar">
          <button class="cat-btn active" onclick="filterCategory('all', this)">üåê Semua</button>
          <button class="cat-btn" onclick="filterCategory('Lampu', this)">üí° Lampu</button>
          <button class="cat-btn" onclick="filterCategory('Kipas Angin', this)">üí® Kipas Angin</button>
          <button class="cat-btn" onclick="filterCategory('Kabel', this)">üîå Kabel</button>
          <button class="cat-btn" onclick="filterCategory('Saklar', this)">üéõÔ∏è Saklar</button>
          <button class="cat-btn" onclick="filterCategory('Antena', this)">üì° Antena</button>
          <button class="cat-btn" onclick="filterCategory('Stopkontak', this)">üîã Stopkontak</button>
          <button class="cat-btn" onclick="filterCategory('Lainnya', this)">üì¶ Lainnya</button>
        </div>

        <div class="product-grid" id="productGrid"></div>
      </section>

      <section id="contact" class="contact-section">
        <h2 class="section-title">Hubungi Kami</h2>
        <div class="contact-grid">
          <div class="contact-card">
            <div class="contact-icon">üì±</div>
            <h3 class="contact-title">WhatsApp</h3>
            <p class="contact-info">Chat langsung dengan kami</p>
            <a href="https://wa.me/+6285872189172" class="contact-link" target="_blank">Chat Sekarang</a>
          </div>
          <div class="contact-card">
            <div class="contact-icon">üìß</div>
            <h3 class="contact-title">Email</h3>
            <p class="contact-info">sadewaelektronik1@gmail.com</p>
            <a href="mailto:sadewaelektronik1@gmail.com" class="contact-link">Kirim Email</a>
          </div>
          <div class="contact-card">
            <div class="contact-icon">üìç</div>
            <h3 class="contact-title">Lokasi</h3>
            <p class="contact-info">Bojong-pari, West Java, Indonesia</p>
            <a href="https://maps.app.goo.gl/GF1r9Dp8J8ZhPWfj7" class="contact-link" target="_blank">Lihat
              Peta</a>
          </div>
          <div class="contact-card">
            <div class="contact-icon">‚è∞</div>
            <h3 class="contact-title">Jam Operasional</h3>
            <p class="contact-info">Senin - Sabtu: 08:00 - 20:00<br>Minggu: 08:00 - 20:00</p>
          </div>
        </div>
      </section>

      <section id="chat" class="chat-section">
        <h2 class="section-title">üß† Smart AI Shopping Assistant</h2>
        <p style="text-align:center;color:var(--gray);margin-top:-2rem;margin-bottom:2rem;">
          Asisten virtual cerdas untuk membantu Anda memilih produk terbaik
        </p>

        <div id="chatlog"></div>
        <div class="chat-input-container">
          <input type="text" id="userInput" placeholder="Tanyakan tentang produk, harga, atau spesifikasi...">
          <button id="sendBtn">Kirim</button>
        </div>
      </section>
    </div>

    <footer id="about">
      <h3 class="logo" style="margin-bottom: 0.75rem;">‚ö° Sadewa Elektronik</h3>

      <p style="max-width:800px;margin:1.25rem auto;color:var(--gray);font-size:1rem;line-height:1.8;">
        Sadewa Elektronik adalah pusat elektronik modern di wilayah Cidahu dan sekitarnya.
        Kami menyediakan produk listrik dan elektronik berkualitas dengan harga kompetitif,
        pelayanan cepat, serta dukungan teknologi AI untuk pengalaman belanja yang lebih cerdas.
      </p>

      <div class="footer-links">
        <a href="#products">Produk</a>
        <a href="#contact">Kontak</a>
        <a href="#chat">AI Assistant</a>
        <a href="#">Kebijakan Privasi</a>
        <a href="#">Syarat & Ketentuan</a>
        <a href="#">FAQ</a>
      </div>

      <p class="copyright">¬© 2025 Sadewa Elektronik ¬∑ Trusted Local Electronics Partner</p>
    </footer>
  </div>

  <div id="adminPanel" class="page-container admin-container">
    <div class="admin-header">
      <h1 class="admin-title">‚ö° Admin Panel - Sadewa Elektronik</h1>
      <button class="admin-logout" onclick="logoutAdmin()">‚Üê Logout</button>
    </div>

    <div class="admin-card">
      <h2>‚ûï Tambah Produk</h2>

      <form onsubmit="addProduct(event)">

        <select class="form-input" id="productCategory" required>
          <option value="">Pilih Kategori</option>
          <option value="Lampu">Lampu</option>
          <option value="Kipas Angin">Kipas Angin</option>
          <option value="Kabel">Kabel</option>
          <option value="Saklar">Saklar</option>
          <option value="Antena">Antena</option>
          <option value="Stopkontak">Stopkontak</option>
          <option value="Lainnya">Lainnya</option>
        </select>

        <!-- Dropdown untuk sub-kategori lampu -->
        <select class="form-input" id="productSubCategory" required>
          <option value="">Pilih Watt Lampu</option>
          <option value="5 Watt">5 Watt</option>
          <option value="7 Watt">7 Watt</option>
          <option value="10 Watt">10 Watt</option>
          <option value="15 Watt">15 Watt</option>
          <option value="20 Watt">20 Watt</option>
          <option value="25 Watt">25 Watt</option>
          <option value="30 Watt">30 Watt</option>
          <option value="40 Watt">40 Watt</option>
          <option value="50 Watt">50 Watt</option>
          <option value="60 Watt">60 Watt</option>
          <option value="70 Watt">70 Watt</option>
          <option value="80 Watt">80 Watt</option>
          <option value="90 Watt">90 Watt</option>
          <option value="100 Watt">100 Watt</option>


        </select>
        <div class="form-grid">
          <input type="text" class="form-input" id="productName" placeholder="Nama Produk" required>
          <input type="text" class="form-input" id="productPrice" placeholder="Harga (Rp)"
            oninput="window.formatRupiah(this)" required>
          <select class="form-input" id="productCategory" required onchange="toggleVariantInput(this)">
            <option value="">Pilih Kategori</option>
            <option value="Lampu">Lampu</option>
            <option value="Kipas Angin">Kipas Angin</option>
            <option value="Kabel">Kabel</option>
            <option value="Saklar">Saklar</option>
            <option value="Antena">Antena</option>
            <option value="Stopkontak">Stopkontak</option>
            <option value="Lainnya">Lainnya</option>
          </select>
          <input type="number" class="form-input" id="productStock" placeholder="Stok Global" min="0" required>
        </div>

        <div id="variantPriceSection"
          style="display:none; margin-bottom:1rem; padding:1rem; background:#f0f9ff; border:1px solid #bae6fd; border-radius:8px;">
          <label style="display:block; font-weight:700; color:#0369a1; margin-bottom:0.5rem;">üí∞ Harga Per Varian
            (Opsional)</label>
          <p style="font-size:0.85rem; color:#0c4a6e; margin-bottom:0.5rem;">
            Masukkan varian dan harga per baris. Contoh:<br>
            5 Watt = 15000<br>
            10 Watt = 25000<br>
            *Jika diisi, input Harga & Kategori Watt di atas akan otomatis disesuaikan.
          </p>
          <textarea class="form-textarea" id="variantPriceInput" rows="4"
            placeholder="5 Watt=15000&#10;10 Watt=25000"></textarea>
        </div>

        <textarea class="form-textarea" id="productDesc" placeholder="Deskripsi Produk" required></textarea>
        <textarea class="form-textarea" id="productFeatures" placeholder="Fitur (pisahkan dengan koma)"
          required></textarea>

        <div>
          <label style="display: block; margin: 1rem 0 0.5rem; font-weight: 800; color: #374151;">Pilih Icon
            atau Upload
            Foto:</label>
          <div class="icon-selector" id="iconSelector">
            <button type="button" class="icon-btn" onclick="selectIcon('‚ö°')">‚ö°</button>
            <button type="button" class="icon-btn" onclick="selectIcon('üí°')">üí°</button>
            <button type="button" class="icon-btn" onclick="selectIcon('üîå')">üîå</button>
            <button type="button" class="icon-btn" onclick="selectIcon('üîß')">üîß</button>
            <button type="button" class="icon-btn" onclick="selectIcon('üì°')">üì°</button>
            <button type="button" class="icon-btn" onclick="selectIcon('üõ†Ô∏è')">üõ†Ô∏è</button>
            <button type="button" class="icon-btn" onclick="selectIcon('üí®')">üí®</button>
            <button type="button" class="icon-btn" onclick="selectIcon('üéõÔ∏è')">üéõÔ∏è</button>
          </div>

          <div class="image-upload-container" onclick="document.getElementById('imageInput').click()">
            <p style="color: #6b7280; margin-bottom: 0.5rem;">üì∑ Klik untuk upload foto produk</p>
            <p style="color: #9ca3af; font-size: 0.85rem;">JPG, PNG, MP4, WebM (Max 200MB)</p>
            <input type="file" id="imageInput" accept="image/*,video/*" style="display: none;"
              onchange="window.handleMediaUpload(event)">
            <img id="imagePreview" class="image-preview" style="display: none;">
            <video id="videoPreview" class="video-preview" style="display: none;" controls></video>
          </div>
          <input type="hidden" id="productImage" value="‚ö°">
        </div>

        <div style="margin-top: 1.5rem;">
          <button type="submit" class="admin-button admin-button-primary">üíæ Simpan Produk</button>
          <button type="button" class="admin-button admin-button-danger" onclick="resetForm()">üîÑ
            Reset</button>
        </div>
      </form>
    </div>

    <div class="admin-table">
      <div id="adminDebugConsole"
        style="display: none; background: #fee2e2; color: #991b1b; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; font-family: monospace; font-size: 0.8rem; border: 1px solid #fecaca;">
        <strong>üêû Debug Info:</strong>
        <pre id="debugOutput" style="margin-top: 0.5rem; white-space: pre-wrap;"></pre>
        <button onclick="runAdminSelfTest()"
          style="margin-top: 0.5rem; background: #991b1b; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer;">Run
          Self-Test</button>
        <button onclick="hardResetData()"
          style="margin-top: 0.5rem; background: #dc2626; color: white; border: none; padding: 4px 12px; border-radius: 4px; cursor: pointer; font-weight: bold; margin-left: 8px;">üî•
          RESET ALL DATA (Hapus Semua)</button>
      </div>
      <table>
        <thead>
          <tr>
            <th>Preview</th>
            <th>Nama Produk</th>
            <th>Kategori</th>
            <th>Harga</th>
            <th>Stok</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="adminProductTable">
          <tr>
            <td colspan="6" style="text-align: center; color: #9ca3af;">Belum ada produk</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc, deleteDoc, doc, onSnapshot, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // 1. CONFIG FIREBASE (GANTI DENGAN PUNYA ANDA)
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyDu21X_Cr7RoTMUnMS9oZCAVOS15D3ssyI",
      authDomain: "sadewa-2.firebaseapp.com",
      projectId: "sadewa-2",
      storageBucket: "sadewa-2.firebasestorage.app",
      messagingSenderId: "325894971034",
      appId: "1:325894971034:web:f0c3cca5083f53d6008923",
      measurementId: "G-2M9X5453L4"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const prodCol = collection(db, "sadewaProducts");

    // Variabel Global Asli
    let products = [];
    let lastSearchQuery = '';
    let activeCategory = 'all';
    let filteredProducts = null;

    // === CART VARIABLES & FUNCTIONS ===
    let cartItems = [];

    // Load cart from localStorage
    function loadCartFromStorage() {
      const saved = localStorage.getItem('sadewaCart');
      if (saved) {
        try {
          cartItems = JSON.parse(saved);
          updateCartBadge();
        } catch (e) {
          console.error('Error loading cart:', e);
          cartItems = [];
        }
      }
    }

    // Save cart to localStorage
    function saveCartToStorage() {
      localStorage.setItem('sadewaCart', JSON.stringify(cartItems));
    }

    // Toggle cart modal
    window.toggleCart = function () {
      const modal = document.getElementById('cartModal');
      modal.classList.toggle('active');
      if (modal.classList.contains('active')) {
        renderCart();
      }
    };

    // Close cart when clicking overlay
    window.closeCartOnOverlay = function (event) {
      if (event.target.id === 'cartModal') {
        toggleCart();
      }
    };

    // Get variant options based on category
    function getVariantOptions(category) {
      const variantMap = {
        'Lampu': ['5 Watt', '7 Watt', '10 Watt', '15 Watt', '20 Watt', '25 Watt', '30 Watt', '40 Watt', '50 Watt', '60 Watt', '70 Watt', '80 Watt', '90 Watt', '100 Watt'],
        'Kabel': ['1.5mm', '2.5mm', '4mm', '6mm', '10mm'],
        'Kipas Angin': ['12 inch', '16 inch', '18 inch', '20 inch'],
        'Saklar': ['1 Gang', '2 Gang', '3 Gang', '4 Gang'],
        'Stopkontak': ['2 Lubang', '3 Lubang', '4 Lubang', 'Universal']
      };
      return variantMap[category] || [];
    }

    // Add to cart
    window.addToCart = function (productId, fromSelect = false) {
      const product = products.find(p => p.id === productId);
      if (!product) return;

      // Logic Varian: Prioritaskan variantPrices dari DB, fallback ke hardcoded
      let variantOptions = [];
      if (product.variantPrices && Object.keys(product.variantPrices).length > 0) {
        variantOptions = Object.keys(product.variantPrices);
      } else {
        variantOptions = getVariantOptions(product.category);
      }

      let selectedVariant = '';
      let finalPrice = product.price; // Default ke harga base (min)

      // Cek varian
      if (variantOptions.length > 0) {
        const selectEl = document.getElementById('variant-' + productId);
        if (selectEl) {
          selectedVariant = selectEl.value;
          if (!selectedVariant || selectedVariant === '') {
            alert('Silakan pilih varian terlebih dahulu!');
            return;
          }

          // AMBIL HARGA PER VARIAN JIKA ADA
          if (product.variantPrices && product.variantPrices[selectedVariant]) {
            finalPrice = product.variantPrices[selectedVariant];
          }
        }
      }

      // Check if item already exists in cart (same product + variant)
      const existingIndex = cartItems.findIndex(
        item => item.id === productId && item.variant === selectedVariant
      );

      if (existingIndex !== -1) {
        // Increase quantity
        cartItems[existingIndex].quantity += 1;
        // Update harga kalau-kalau berubah di admin
        cartItems[existingIndex].price = finalPrice;
      } else {
        // Add new item
        cartItems.push({
          id: productId,
          name: product.name,
          price: finalPrice, // Gunakan harga final (varian atau base)
          variant: selectedVariant,
          quantity: 1,
          media: product.media
        });
      }

      saveCartToStorage();
      updateCartBadge();

      // Show feedback
      alert('Produk berhasil ditambahkan ke keranjang!');
    };

    // Remove from cart
    window.removeFromCart = function (index) {
      cartItems.splice(index, 1);
      saveCartToStorage();
      updateCartBadge();
      renderCart();
    };

    // Update quantity
    window.updateQuantity = function (index, change) {
      cartItems[index].quantity += change;
      if (cartItems[index].quantity <= 0) {
        removeFromCart(index);
      } else {
        saveCartToStorage();
        renderCart();
      }
    };

    // Calculate total
    function calculateTotal() {
      return cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    }

    // Update cart badge
    function updateCartBadge() {
      const badge = document.getElementById('cartBadge');
      const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
      if (badge) {
        badge.textContent = totalItems;
      }
    }

    // Render cart items
    function renderCart() {
      const container = document.getElementById('cartItemsContainer');
      const totalEl = document.getElementById('cartTotalValue');

      if (cartItems.length === 0) {
        container.innerHTML = '<div class="cart-empty"><div class="cart-empty-icon">üõí</div><p class="cart-empty-text">Keranjang Anda masih kosong</p></div>';
        totalEl.textContent = 'Rp 0';
        return;
      }

      container.innerHTML = cartItems.map((item, index) => {
        const media = item.media && item.media.startsWith('data:image')
          ? '<img src="' + item.media + '" style="width:60px; height:60px; object-fit:cover; border-radius:8px; margin-right:12px;">'
          : '<div style="width:60px; height:60px; display:flex; align-items:center; justify-content:center; font-size:2rem; margin-right:12px;">' + (item.media || '‚ö°') + '</div>';

        return '<div class="cart-item"><div class="cart-item-header"><div style="display:flex; align-items:center; flex:1;">'
          + media
          + '<div><div class="cart-item-name">' + item.name + '</div>'
          + (item.variant ? '<div class="cart-item-variant">Varian: ' + item.variant + '</div>' : '')
          + '</div></div><button class="cart-item-remove" onclick="removeFromCart(' + index + ')">üóëÔ∏è</button></div>'
          + '<div class="cart-item-footer"><div class="cart-item-quantity">'
          + '<button class="qty-btn" onclick="updateQuantity(' + index + ', -1)">-</button>'
          + '<span class="qty-value">' + item.quantity + '</span>'
          + '<button class="qty-btn" onclick="updateQuantity(' + index + ', 1)">+</button></div>'
          + '<div class="cart-item-price">Rp ' + (item.price * item.quantity).toLocaleString('id-ID') + '</div></div></div>';
      }).join('');

      totalEl.textContent = 'Rp ' + calculateTotal().toLocaleString('id-ID');
    }

    // Clear cart
    window.clearCart = function () {
      if (confirm('Yakin ingin mengosongkan keranjang?')) {
        cartItems = [];
        saveCartToStorage();
        updateCartBadge();
        renderCart();
      }
    };

    // Checkout via WhatsApp
    window.checkoutWhatsApp = function () {
      if (cartItems.length === 0) {
        alert('Keranjang Anda masih kosong!');
        return;
      }

      let message = 'üõí *Pesanan dari Sadewa Elektronik*\n\n';
      message += '*Detail Pesanan:*\n';

      cartItems.forEach((item, i) => {
        message += '\n' + (i + 1) + '. ' + item.name;
        if (item.variant) {
          message += ' (' + item.variant + ')';
        }
        message += '\n   Jumlah: ' + item.quantity + ' pcs';
        message += '\n   Harga: Rp ' + (item.price * item.quantity).toLocaleString('id-ID');
        message += '\n';
      });

      message += '\n*Total: Rp ' + calculateTotal().toLocaleString('id-ID') + '*\n\n';
      message += 'Mohon konfirmasi ketersediaan dan estimasi pengiriman. Terima kasih!';

      const phoneNumber = '6285872189172';
      const encodedMessage = encodeURIComponent(message);
      const whatsappURL = 'https://wa.me/' + phoneNumber + '?text=' + encodedMessage;

      window.open(whatsappURL, '_blank');
    };


    // 2. INITIALIZATION & REAL-TIME SYNC
    function init() {
      // Mengambil data real-time dari Firestore
      onSnapshot(query(prodCol, orderBy("createdAt", "desc")), (snapshot) => {
        products = snapshot.docs.map(d => ({ id: d.id, ...d.data() }));
        applyFilters();
        renderAdminTable();
      });

      initSearchBar();
      initChat();
    }

    // 3. ADMIN FUNCTIONS (LOGIN & MODAL)
    // Fungsi untuk membuka modal
    // Fungsi membuka modal cyberpunk
    // 1. Fungsi Membuka Modal
    // 1. Definisikan Kredensial (Jika belum ada)
    const ADMIN_CREDENTIALS = {
      username: "admin",
      password: "admin123" // Ganti sesuai keinginan
    };

    // 2. Daftarkan ke Window agar bisa dipanggil onclick HTML
    window.showLoginModal = () => {
      const modal = document.getElementById('loginModal');
      if (modal) {
        modal.classList.add('active');
        modal.style.display = 'flex'; // Memastikan muncul secara visual
      }
    };

    window.closeLoginModal = () => {
      const modal = document.getElementById('loginModal');
      if (modal) {
        modal.classList.remove('active');
        modal.style.display = 'none'; // Menghilangkan modal
        // Reset input jika ID nya ada
        if (document.getElementById('loginUsername')) document.getElementById('loginUsername').value = '';
        if (document.getElementById('loginPassword')) document.getElementById('loginPassword').value = '';
      }
    };

    window.handleLogin = (e) => {
      if (e) e.preventDefault(); // Mencegah refresh halaman

      const user = document.getElementById('loginUsername').value;
      const pass = document.getElementById('loginPassword').value;

      if (user === ADMIN_CREDENTIALS.username && pass === ADMIN_CREDENTIALS.password) {
        window.closeLoginModal();
        window.showAdminPanel();
      } else {
        alert('ACCESS DENIED: Data tidak valid!');
      }
    };

    window.showAdminPanel = () => {
      // Sembunyikan Landing Page
      const mainWeb = document.getElementById('mainWebsite');
      mainWeb.classList.remove('active');
      mainWeb.style.display = 'none';

      // Tampilkan Admin Panel
      const adminPanel = document.getElementById('adminPanel');
      adminPanel.classList.add('active');
      adminPanel.style.display = 'block';

      // Tampilkan Admin-Card secara spesifik
      const adminCard = document.getElementById('admin-card');
      if (adminCard) {
        adminCard.style.display = 'block';
        adminCard.classList.add('active');
      }
    };

    window.logoutAdmin = () => {
      // Balikkan kondisi
      document.getElementById('adminPanel').classList.remove('active');
      document.getElementById('adminPanel').style.display = 'none';

      document.getElementById('mainWebsite').classList.add('active');
      document.getElementById('mainWebsite').style.display = 'block';
    };
    // Fungsi untuk memformat angka menjadi format ribuan saat diketik
    // UPDATED: Mendukung format range "15.000 - 100.000" dengan auto-dots
    window.formatRupiah = (element) => {
      let value = element.value;

      // 1. Cek apakah ini range (mengandung "-")
      if (value.includes('-')) {
        // Pisahkan berdasarkan strip
        let parts = value.split('-');

        // Bersihkan dan format setiap bagian
        let formattedParts = parts.map((part, index) => {
          // Hapus semua karakter non-digit
          let raw = part.replace(/\D/g, "");

          // Jika kosong (misal baru ngetik "-"), kembalikan string kosong
          if (!raw) return "";

          // Format angka ribuan
          return new Intl.NumberFormat('id-ID').format(raw);
        });

        // Gabungkan kembali dengan separator " - "
        // Logic trick: kalau bagian kedua masih kosong (misal baru ngetik "20.000-"), 
        // jangan paksa tambah spasi biar cursor gak lompat aneh, tapi kita handle basic join.
        if (parts.length > 1) {
          element.value = formattedParts[0] + " - " + formattedParts[1];
        } else {
          element.value = formattedParts[0] + " - ";
        }

      } else {
        // Bukan range, format biasa single price
        let numberString = value.replace(/\D/g, "");
        if (numberString === "") {
          element.value = "";
          return;
        }
        element.value = new Intl.NumberFormat('id-ID').format(numberString);
      }
    };

    // Toggle input varian di form tambah produk
    window.toggleVariantInput = (select) => {
      const val = select.value;
      const section = document.getElementById('variantPriceSection');
      const subCat = document.getElementById('productSubCategory');

      // Daftar kategori yang butuh varian
      const needVariant = ['Lampu', 'Kabel', 'Kipas Angin', 'Saklar', 'Stopkontak'];

      if (needVariant.includes(val)) {
        section.style.display = 'block';
        // Subkategori jadi opsional jika pakai varian manual
        subCat.required = false;
      } else {
        section.style.display = 'none';
        subCat.required = false;
      }
    };

    window.filterCategory = (category, btn) => {
      activeCategory = category;
      document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      if (category === 'Lampu') {
        // Tampilkan dropdown subkategori jika kategori adalah 'Lampu'
        document.getElementById('productSubCategory').style.display = 'block';
      } else {
        document.getElementById('productSubCategory').style.display = 'none';
      }
      applyFilters();
    };

    // Fungsi pembantu untuk mengubah "25.000" kembali jadi 25000 (angka murni)
    const cleanNumber = (str) => {
      return parseInt(str.replace(/\./g, "")) || 0;
    };

    // 4. DATABASE OPERATIONS (FIRESTORE)
    window.addProduct = async (e) => {
      e.preventDefault();
      try {
        const rawPrice = document.getElementById('productPrice').value;
        const variantInput = document.getElementById('variantPriceInput').value.trim();

        let finalPrice = 0;
        let displayPrice = "";
        let variantPrices = {}; // { "5 Watt": 15000, "10 Watt": 20000 }

        // 1. Parsing Variant Input jika ada
        if (variantInput) {
          const lines = variantInput.split('\n');
          let minP = Infinity;
          let maxP = -Infinity;

          lines.forEach(line => {
            const parts = line.split('=');
            if (parts.length === 2) {
              const vName = parts[0].trim();
              const vPrice = cleanNumber(parts[1].trim());
              if (vName && vPrice > 0) {
                variantPrices[vName] = vPrice;
                if (vPrice < minP) minP = vPrice;
                if (vPrice > maxP) maxP = vPrice;
              }
            }
          });

          // Jika valid variants found
          if (Object.keys(variantPrices).length > 0) {
            finalPrice = minP;
            if (minP === maxP) {
              displayPrice = `Rp ${minP.toLocaleString('id-ID')}`;
            } else {
              displayPrice = `${minP.toLocaleString('id-ID')} - ${maxP.toLocaleString('id-ID')}`;
            }
          }
        }

        // 2. Fallback ke input harga biasa jika tidak ada varian valid
        if (Object.keys(variantPrices).length === 0) {
          if (rawPrice.includes('-')) {
            const parts = rawPrice.split('-');
            const firstPart = parts[0].trim();
            finalPrice = cleanNumber(firstPart);
            displayPrice = rawPrice;
          } else {
            finalPrice = cleanNumber(rawPrice);
            // displayPrice kosong, nanti render pakai toLocaleString
          }
        }

        const newProduct = {
          name: document.getElementById('productName').value,
          price: finalPrice,
          displayPrice: displayPrice,
          variantPrices: variantPrices,   // Simpan map varian
          category: document.getElementById('productCategory').value,
          subCategory: document.getElementById('productSubCategory').value,
          stock: parseInt(document.getElementById('productStock').value),
          description: document.getElementById('productDesc').value,
          features: document.getElementById('productFeatures').value,
          media: document.getElementById('productImage').value || '‚ö°',
          createdAt: serverTimestamp()
        };

        const subCategory = document.getElementById('productSubCategory').value;
        if (!subCategory && activeCategory === 'Lampu') {
          alert('Pilih watt untuk Lampu!');
          return;
        }

        await addDoc(prodCol, newProduct);
        alert("Produk Berhasil Disimpan di Cloud!");

        // Reset form dan gambar preview
        e.target.reset();
        if (document.getElementById('imagePreview')) {
          document.getElementById('imagePreview').style.display = 'none';
        }
      } catch (err) {
        alert("Gagal Simpan: " + err.message);
      }
    };

    window.deleteProduct = async (id) => {
      if (confirm("Hapus produk ini secara permanen?")) {
        await deleteDoc(doc(db, "sadewaProducts", id));
      }
    };

    // 5. SEARCH & FILTER LOGIC
    window.applyFilters = () => {
      const q = lastSearchQuery.trim().toLowerCase();
      filteredProducts = products.filter(p => {
        const passCat = (activeCategory === 'all') ? true : (p.category === activeCategory);
        const passSearch = q ? [p.name, p.description].some(s => s.toLowerCase().includes(q)) : true;
        return passCat && passSearch;
      });
      renderProducts();

      // Update search meta counter
      const searchMeta = document.getElementById('searchMeta');
      if (searchMeta) {
        const total = products.length;
        const showing = filteredProducts ? filteredProducts.length : total;
        searchMeta.textContent = `Menampilkan ${showing} dari ${total}`;
      }
    };

    window.filterCategory = (category, btn) => {
      activeCategory = category;
      document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      applyFilters();
    };

    function initSearchBar() {
      const searchInput = document.getElementById('productSearch');
      const clearBtn = document.getElementById('clearSearchBtn');

      searchInput.oninput = (e) => {
        lastSearchQuery = e.target.value;
        applyFilters();
      };

      // Clear search button
      if (clearBtn) {
        clearBtn.onclick = () => {
          searchInput.value = '';
          lastSearchQuery = '';
          applyFilters();
        };
      }
    }
    window.handleMediaUpload = (e) => {
      const file = e.target.files[0];
      if (!file) return;

      // Validasi Ukuran (Opsional: Batasi maksimal 2MB agar Firestore lancar)
      if (file.size > 2 * 1024 * 1024) {
        alert("Ukuran file terlalu besar! Maksimal 2MB.");
        e.target.value = ""; // Reset input
        return;
      }

      const reader = new FileReader();
      reader.onload = (event) => {
        const base64String = event.target.result;

        // 1. Simpan string gambar ke input hidden agar terkirim ke Firestore
        const hiddenInput = document.getElementById('productImage');
        if (hiddenInput) {
          hiddenInput.value = base64String;
        }

        // 2. Tampilkan Preview Gambar agar Admin tahu foto sudah masuk
        const preview = document.getElementById('imagePreview');
        if (preview) {
          preview.src = base64String;
          preview.style.display = 'block';
        }

        console.log("Gambar berhasil dikonversi ke Base64");
      };

      reader.onerror = () => {
        alert("Gagal membaca file!");
      };

      reader.readAsDataURL(file);
    };
    // 6. RENDER UI
    window.renderProducts = function () {
      const grid = document.getElementById('productGrid');
      const list = (filteredProducts ? filteredProducts : products);

      if (list.length === 0) {
        grid.innerHTML = `<p style="text-align:center; grid-column:1/-1;">Produk tidak ditemukan.</p>`;
        return;
      }

      grid.innerHTML = list.map(p => {
        // LOGIKA PERBAIKAN: Cek apakah media dimulai dengan "data:image" (Base64)
        const mediaContent = p.media.startsWith('data:image')
          ? `<img src="${p.media}" style="width:100%; height:100%; object-fit:cover;">`
          : `<div style="font-size: 5rem; display:flex; align-items:center; justify-content:center; height:100%;">${p.media}</div>`;

        // Logic Varian: Prioritaskan variantPrices dari DB, fallback ke hardcoded
        let variantOptions = [];
        let hasCustomVariants = false;

        if (p.variantPrices && Object.keys(p.variantPrices).length > 0) {
          variantOptions = Object.keys(p.variantPrices);
          hasCustomVariants = true;
        } else {
          variantOptions = getVariantOptions(p.category);
        }

        let variantHtml = '';
        if (variantOptions && variantOptions.length > 0) {
          // Tambahkan onchange untuk update harga real-time
          variantHtml = `
            <select id="variant-${p.id}" class="variant-select" onclick="event.stopPropagation()" onchange="updateProductPrice(this, '${p.id}')">
              <option value="">-- Pilih Varian --</option>
              ${variantOptions.map(v => `<option value="${v}">${v}</option>`).join('')}
            </select>`;
        }

        // TAMPILKAN HARGA: Gunakan displayPrice jika ada (range), kalau tidak gunakan price biasa
        const priceToShow = p.displayPrice ? p.displayPrice : `Rp ${p.price.toLocaleString('id-ID')}`;

        return `
      <div class="product-card" id="card-${p.id}">
        <div class="product-image" style="height:200px; background:rgba(0,0,0,0.2); overflow:hidden; display:flex; align-items:center; justify-content:center;">
          ${mediaContent}
        </div>
        <div class="product-info">
          <h3 class="product-title">${p.name}</h3>
          <p class="product-desc">${p.description || ''}</p>
          
          ${variantHtml}

          <div class="product-price-wrapper">
            <div class="product-price" id="price-${p.id}" style="margin-bottom:0">${priceToShow}</div>
            <button class="btn-add-cart" onclick="addToCart('${p.id}', true)" title="Tambah ke Keranjang">üõí</button>
          </div>

          <button class="btn" onclick="buyDirectly('${p.id}')">Beli Sekarang</button>
        </div>
      </div>
    `;
      }).join('');
    };

    // Fungsi Update Harga saat Pilih Varian
    window.updateProductPrice = (select, pid) => {
      const val = select.value;
      const product = products.find(p => p.id === pid);
      const priceEl = document.getElementById('price-' + pid);

      if (!product || !priceEl) return;

      if (val && product.variantPrices && product.variantPrices[val]) {
        // Jika varian dipilih dan ada harganya, update teks harga
        const newPrice = product.variantPrices[val];
        priceEl.textContent = `Rp ${newPrice.toLocaleString('id-ID')}`;
        priceEl.style.color = '#00d4ff'; // Highlight
      } else {
        // Balik ke harga default (displayPrice atau range awal)
        const defaultPrice = product.displayPrice ? product.displayPrice : `Rp ${product.price.toLocaleString('id-ID')}`;
        priceEl.textContent = defaultPrice;
      }
    };

    // Note: addToCart needs update too, I will inject the updated addToCart below logic block or I should have done it separately. 
    // Wait, addToCart is defined way above. I need to redefine it or I can just override it here?
    // It is cleaner to update the original addToCart function.
    // However, since I am in "replace_file_content" for renderProducts area, I cannot reach lines 1914 easily in same call.
    // I will do renderProducts first.

    // Fungsi Direct Buy via WhatsApp dengan Varian
    window.buyDirectly = (productId) => {
      const product = products.find(p => p.id === productId);
      if (!product) return;

      let message = `Halo, saya mau beli *${product.name}*`;
      let selectedVariant = '';

      // Cek apakah ada dropdown varian di card produk
      const selectEl = document.getElementById('variant-' + productId);
      if (selectEl) {
        selectedVariant = selectEl.value;
        if (selectedVariant) {
          message += ` (Varian: ${selectedVariant})`;

          // Tambahkan harga spesifik jika ada
          if (product.variantPrices && product.variantPrices[selectedVariant]) {
            const vPrice = product.variantPrices[selectedVariant];
            message += `\nHarga: Rp ${vPrice.toLocaleString('id-ID')}`;
          }
        } else {
          // Opsional: Jika user belum pilih varian tapi klik Beli, kita bisa ingatkan atau biarkan pesan umum
          // Untuk praktis, kita biarkan tapi tambahkan note
          // message += `\n(Mohon info varian yang diinginkan)`;
        }
      }

      // Encode dan kirim
      const phone = '6285872189172';
      const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
      window.open(url, '_blank');
    };

    function renderAdminTable() {
      const tbody = document.getElementById('adminProductTable');
      tbody.innerHTML = products.map(p => {
        const priceDisplay = p.displayPrice ? p.displayPrice : `Rp ${p.price.toLocaleString()}`;
        return `
        <tr>
          <td style="padding:10px">${p.name}</td>
          <td>${p.category}</td>
          <td>${priceDisplay}</td>
          <td>${p.stock}</td>
          <td><button onclick="deleteProduct('${p.id}')" style="color:red; cursor:pointer;">Hapus</button></td>
        </tr>
      `;
      }).join('');
    }
    function initChat() {
      const chatlog = document.getElementById('chatlog');
      const userInput = document.getElementById('userInput');
      const sendBtn = document.getElementById('sendBtn');
      const welcomeMessage = `
    <div class="message bot-message">
      <b>Sadewa AI:</b><br>
      Halo! Selamat datang di Sadewa Elektronik. ‚ö°<br>
      Ada yang bisa saya bantu? Anda bisa menanyakan produk, harga, atau stok barang kami.
    </div>
  `;
      chatlog.innerHTML = welcomeMessage;

      // Fungsi untuk mengirim pesan
      const sendMessage = () => {
        const queryText = userInput.value.trim().toLowerCase();
        if (!queryText) return;

        // Tampilkan pesan user
        chatlog.innerHTML += `<div class="message user-message"><b>Anda:</b><br>${userInput.value}</div>`;
        userInput.value = '';

        setTimeout(() => {
          let reply = "";

          // 1. Cek apakah user menanyakan Kategori (misal: "lampu", "kipas")
          const categoryMatch = products.filter(p =>
            queryText.includes(p.category.toLowerCase())
          );

          // 2. Cek apakah user menanyakan Nama Produk spesifik
          const nameMatch = products.find(p =>
            queryText.includes(p.name.toLowerCase())
          );

          if (categoryMatch.length > 0 && !nameMatch) {
            // JIKA COCOK KATEGORI: Tampilkan semua barang di kategori tersebut
            reply = `Berikut adalah produk kami di kategori <b>${categoryMatch[0].category}</b>:<br><br>`;

            categoryMatch.forEach(p => {
              const media = p.media.startsWith('data:image')
                ? `<img src="${p.media}" style="width:100%; max-width:150px; border-radius:8px; display:block; margin:5px 0;">`
                : `<div style="font-size:2rem;">${p.media}</div>`;

              reply += `
                <div style="border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom:10px; margin-bottom:10px;">
                    ${media}
                    <b>${p.name}</b><br>
                    Harga: Rp ${p.price.toLocaleString()}<br>
                    Stok: ${p.stock} unit
                </div>`;
            });
          } else if (nameMatch) {
            // JIKA COCOK NAMA: Tampilkan satu barang spesifik (seperti sebelumnya)
            const media = nameMatch.media.startsWith('data:image')
              ? `<img src="${nameMatch.media}" style="width:100%; max-width:200px; border-radius:10px; margin-top:10px; display:block;">`
              : `<div style="font-size:3rem;">${nameMatch.media}</div>`;

            reply = `Tentu! Ini detail <b>${nameMatch.name}</b>:<br>${media}<br>
                 Harga: Rp ${nameMatch.price.toLocaleString()}<br>
                 Stok: ${nameMatch.stock} unit.`;
          } else if (queryText.includes("halo") || queryText.includes("hai")) {
            reply = "Halo! Mau cari produk apa hari ini? Ketik kategori (Lampu/Kipas) atau nama barangnya ya.";
          } else {
            reply = "Maaf, saya tidak menemukan produk atau kategori tersebut. Coba ketik 'Lampu' atau 'Kipas'.";
          }

          chatlog.innerHTML += `<div class="message bot-message"><b>Sadewa AI:</b><br>${reply}</div>`;
          chatlog.scrollTop = chatlog.scrollHeight;
        }, 600);
      };

      // Event listener untuk tombol kirim
      sendBtn.onclick = sendMessage;

      // Event listener untuk Enter key
      userInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          sendMessage();
        }
      });
    }

    init();
  </script>

  <!-- Cart Modal -->
  <div id="cartModal" class="cart-modal" onclick="closeCartOnOverlay(event)">
    <div class="cart-sidebar">
      <!-- Header -->
      <div class="cart-header">
        <h2 class="cart-title">üõí Keranjang Belanja</h2>
        <button class="cart-close" onclick="toggleCart()">‚úï</button>
      </div>

      <!-- Items Container -->
      <div class="cart-items" id="cartItemsContainer">
        <!--Cart items will be rendered here dynamically -->
        <div class="cart-empty">
          <div class="cart-empty-icon">üõí</div>
          <p class="cart-empty-text">Keranjang Anda masih kosong</p>
        </div>
      </div>

      <!-- Footer with Total and Checkout -->
      <div class="cart-footer">
        <div class="cart-total">
          <span class="cart-total-label">Total:</span>
          <span class="cart-total-value" id="cartTotalValue">Rp 0</span>
        </div>
        <button class="cart-checkout-btn" id="checkoutBtn" onclick="checkoutWhatsApp()">
          üí¨ Checkout via WhatsApp
        </button>
        <button class="cart-clear-btn" onclick="clearCart()">Kosongkan Keranjang</button>
      </div>
    </div>
  </div>

</body>

</html>